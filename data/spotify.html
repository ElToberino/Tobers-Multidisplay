<!-- 
Tobers Multidisplay by ElToberino (c) 2020
for further information see: https://github.com/ElToberino/Tobers_Multidisplay
-->

<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Cache-control" content="no-cache">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Spotify Info</title>
  <SCRIPT>
        window.addEventListener('load', () => {
		 //sleep(50);											// uncomment this to circumvent ESP32 problem with chrome
		 once();
		 })
		  
        function once() {
          fetch('/cover')
			  .then(response => {
				return response.json()
				})
              .then(data => {
    
				document.getElementById("Songinfo").innerHTML = data.Info;
				document.getElementById("Cover").src = data.Url;  
				               
				
				console.log(data)
				})
			.catch(err => {
                 // Do something for an error here
				 document.getElementById("Songinfo").innerHTML = "FEHLER: Daten konnten nicht geladen werden!";
				})
		}
				
		function sleep(miliseconds) {
			var currentTime = new Date().getTime();
			while (currentTime + miliseconds >= new Date().getTime()) {
			}
		}	
			
</SCRIPT>

</head>
<body>

<div>

<div class="aussen">
<h1><nobr>Tobers Multidisplay</nobr></h1>

<h2>Es läuft gerade auf Spotify</h2><br>

<p>
<div>
<img id="Cover" src="" style="max-width:90%; max-height:30%;">
</div>
<div class="spotify"><span id="Songinfo" style="text-align:left;">0</span></div>

<br>
<div style="text-align:center; color:white;">
<a href="index.html" style="outline:none;"><div class="knopflink">Message</div></a>
<a href="news.html" style="outline:none;"><div class="knopflink">News</div></a>
<a href="weather.html" style="outline:none;"><div class="knopflink">Wetter</div></a>
</div>

<div>
<div class="promenu small">Nur mit Login:</div>
<div class="promenu small"><a class="prolink" href="admin.html">Admin</a></div>
<div class="promenu small"><a class="prolink" href="config.html">Config</a></div>
<div class="promenu small"><a class="prolink" href="spiffs.html">Spiffs</a></div>
</div>

</div>
</div>

</body>
</html>
